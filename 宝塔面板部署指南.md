# å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—

## é—®é¢˜è§£å†³

### npmå®‰è£…é”™è¯¯è§£å†³æ–¹æ¡ˆ

å¦‚æœé‡åˆ°ç±»ä¼¼ä»¥ä¸‹é”™è¯¯ï¼š
```
npm error 404 Not Found - GET https://cdn.npmmirror.com/binaries/npm/vue-router/-/vue-router-4.5.1.tgz
```

**è§£å†³æ­¥éª¤ï¼š**

1. **æ¸…é™¤npmç¼“å­˜**
```bash
npm cache clean --force
```

2. **åˆ é™¤æ—§çš„ä¾èµ–æ–‡ä»¶**
```bash
rm -rf node_modules package-lock.json
```

3. **é‡æ–°å®‰è£…ä¾èµ–**
```bash
npm install
```

4. **å¦‚æœä»ç„¶æŠ¥é”™ï¼Œåˆ‡æ¢npmæº**
```bash
# åˆ‡æ¢åˆ°å®˜æ–¹æº
npm config set registry https://registry.npmjs.org/

# æˆ–è€…ä½¿ç”¨æ·˜å®æº
npm config set registry https://registry.npmmirror.com/

# ç„¶åé‡æ–°å®‰è£…
npm install
```

## å®å¡”é¢æ¿éƒ¨ç½²æ­¥éª¤

### 1. ç¯å¢ƒå‡†å¤‡

åœ¨å®å¡”é¢æ¿ä¸­å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š
- **Node.js** (æ¨èç‰ˆæœ¬ 16.x æˆ– 18.x)
- **Nginx** (ç”¨äºé™æ€æ–‡ä»¶æœåŠ¡)
- **PM2ç®¡ç†å™¨** (å¯é€‰ï¼Œç”¨äºè¿›ç¨‹ç®¡ç†)

### 2. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶

1. å°†é¡¹ç›®æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ç›®å½•ï¼Œä¾‹å¦‚ï¼š`/www/wwwroot/ai-resume`
2. åœ¨å®å¡”é¢æ¿çš„æ–‡ä»¶ç®¡ç†ä¸­è§£å‹é¡¹ç›®æ–‡ä»¶

### 3. å®‰è£…ä¾èµ–å’Œæ„å»º

åœ¨å®å¡”é¢æ¿çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/ai-resume

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build
```

### 4. é…ç½®Nginx

åœ¨å®å¡”é¢æ¿ä¸­åˆ›å»ºç½‘ç«™ï¼š

1. ç‚¹å‡»ã€Œç½‘ç«™ã€â†’ã€Œæ·»åŠ ç«™ç‚¹ã€
2. åŸŸåå¡«å†™ä½ çš„åŸŸå
3. æ ¹ç›®å½•è®¾ç½®ä¸ºï¼š`/www/wwwroot/ai-resume/dist`
4. é€‰æ‹©PHPç‰ˆæœ¬ï¼ˆå¯é€‰æ‹©çº¯é™æ€ï¼‰

**Nginxé…ç½®ç¤ºä¾‹ï¼š**

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /www/wwwroot/ai-resume/dist;
    index index.html;
    
    # Vue Router å†å²æ¨¡å¼æ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}
```

### 5. SSLè¯ä¹¦é…ç½®ï¼ˆæ¨èï¼‰

åœ¨å®å¡”é¢æ¿ä¸­ï¼š
1. è¿›å…¥ç½‘ç«™è®¾ç½®
2. ç‚¹å‡»ã€ŒSSLã€é€‰é¡¹å¡
3. é€‰æ‹©ã€ŒLet's Encryptã€å…è´¹è¯ä¹¦
4. ç‚¹å‡»ç”³è¯·è¯ä¹¦

### 6. é˜²ç«å¢™è®¾ç½®

ç¡®ä¿ä»¥ä¸‹ç«¯å£å·²å¼€æ”¾ï¼š
- **80** (HTTP)
- **443** (HTTPS)

## å¸¸è§é—®é¢˜è§£å†³

### 1. Node.jsç‰ˆæœ¬é—®é¢˜

å¦‚æœé‡åˆ°Node.jsç‰ˆæœ¬ä¸å…¼å®¹ï¼š

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
node -v

# å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œåœ¨å®å¡”é¢æ¿ä¸­å‡çº§Node.jsç‰ˆæœ¬
```

### 2. æƒé™é—®é¢˜

```bash
# è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
chmod -R 755 /www/wwwroot/ai-resume
chown -R www:www /www/wwwroot/ai-resume
```

### 3. å†…å­˜ä¸è¶³

å¦‚æœæ„å»ºæ—¶å†…å­˜ä¸è¶³ï¼š

```bash
# å¢åŠ Node.jså†…å­˜é™åˆ¶
node --max-old-space-size=4096 node_modules/.bin/vite build
```

### 4. ç«¯å£å ç”¨

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep :80

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

## è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

åˆ›å»º `deploy-bt.sh` è„šæœ¬ï¼š

```bash
#!/bin/bash

# å®å¡”é¢æ¿è‡ªåŠ¨éƒ¨ç½²è„šæœ¬

set -e

echo "ğŸš€ å¼€å§‹å®å¡”é¢æ¿éƒ¨ç½²..."

# é¡¹ç›®ç›®å½•
PROJECT_DIR="/www/wwwroot/ai-resume"

# è¿›å…¥é¡¹ç›®ç›®å½•
cd $PROJECT_DIR

# å¤‡ä»½æ—§ç‰ˆæœ¬
if [ -d "dist" ]; then
    mv dist dist.backup.$(date +%Y%m%d_%H%M%S)
fi

# æ¸…ç†ç¼“å­˜
npm cache clean --force
rm -rf node_modules package-lock.json

# å®‰è£…ä¾èµ–
echo "ğŸ“¦ å®‰è£…ä¾èµ–..."
npm install

# æ„å»ºé¡¹ç›®
echo "ğŸ”¨ æ„å»ºé¡¹ç›®..."
npm run build

# è®¾ç½®æƒé™
chown -R www:www dist/
chmod -R 755 dist/

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸ“ ç½‘ç«™æ ¹ç›®å½•: $PROJECT_DIR/dist"
echo "ğŸŒ è¯·åœ¨å®å¡”é¢æ¿ä¸­é…ç½®NginxæŒ‡å‘æ­¤ç›®å½•"
```

## ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—æŸ¥çœ‹

åœ¨å®å¡”é¢æ¿ä¸­æŸ¥çœ‹ï¼š
- Nginxè®¿é—®æ—¥å¿—ï¼š`/www/wwwlogs/your-domain.com.log`
- Nginxé”™è¯¯æ—¥å¿—ï¼š`/www/wwwlogs/your-domain.com.error.log`

### 2. æ€§èƒ½ç›‘æ§

ä½¿ç”¨å®å¡”é¢æ¿çš„ç›‘æ§åŠŸèƒ½ï¼š
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ä½¿ç”¨ç‡
- ç½‘ç»œæµé‡

### 3. å®šæœŸå¤‡ä»½

åœ¨å®å¡”é¢æ¿ä¸­è®¾ç½®ï¼š
- ç½‘ç«™æ–‡ä»¶å¤‡ä»½
- æ•°æ®åº“å¤‡ä»½ï¼ˆå¦‚æœ‰ï¼‰
- å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶

## ä¼˜åŒ–å»ºè®®

1. **å¯ç”¨Gzipå‹ç¼©**
2. **é…ç½®æµè§ˆå™¨ç¼“å­˜**
3. **ä½¿ç”¨CDNåŠ é€Ÿ**
4. **å®šæœŸæ›´æ–°ä¾èµ–**
5. **ç›‘æ§ç½‘ç«™æ€§èƒ½**

---

å¦‚é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å®å¡”é¢æ¿çš„é”™è¯¯æ—¥å¿—æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚